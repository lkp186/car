(function(S){var A=S.fn.domManip,V="_tmplitem",D=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,Q={},T={},W,C={key:0,data:{}},K=0,R=0,O=[];function U(a,Z,Y,b){var f={data:b||(Z?Z.data:{}),_wrap:Z?Z._wrap:null,tmpl:null,parent:Z||null,nodes:[],calls:H,nest:F,wrap:X,html:E,update:G};a&&S.extend(f,a,{nodes:[],parent:Z});if(Y){f.tmpl=Y;f._ctnt=f._ctnt||f.tmpl(S,f);f.key=++K;(O.length?T:Q)[K]=f}return f}S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(Z,Y){S.fn[Z]=function(e){var p=[],d=S(e),b,c,o,f,a=this.length===1&&this[0].parentNode;W=Q||{};if(a&&a.nodeType===11&&a.childNodes.length===1&&d.length===1){d[Y](this[0]);p=this}else{for(c=0,o=d.length;c<o;c++){R=c;b=(c>0?this.clone(true):this).get();S.fn[Y].apply(S(d[c]),b);p=p.concat(b)}R=0;p=this.pushStack(p,Z,d.selector)}f=W;W=null;S.tmpl.complete(f);return p}});S.fn.extend({tmpl:function(Y,a,Z){return S.tmpl(this[0],Y,a,Z)},tmplItem:function(){return S.tmplItem(this[0])},template:function(Y){return S.template(Y,this[0])},domManip:function(Z,c,e){if(Z[0]&&Z[0].nodeType){var k=S.makeArray(arguments),Y=Z.length,a=0,b;while(a<Y&&!(b=S.data(Z[a++],"tmplItem"))){}if(Y>1){k[0]=[S.makeArray(Z)]}if(b&&R){k[2]=function(d){S.tmpl.afterManip(this,d,e)}}A.apply(this,k)}else{A.apply(this,arguments)}R=0;!W&&S.tmpl.complete(Q);return this}});S.extend({tmpl:function(Z,Y,a,b){var f,g=!b;if(g){b=C;Z=S.template[Z]||S.template(null,Z);T={}}else{if(!Z){Z=b.tmpl;Q[b.key]=b;b.nodes=[];b.wrapped&&M(b,b.wrapped);return S(L(b,null,b.tmpl(S,b)))}}if(!Z){return[]}if(typeof Y==="function"){Y=Y.call(b||{})}a&&a.wrapped&&M(a,a.wrapped);f=S.isArray(Y)?S.map(Y,function(c){return c?U(a,b,Z,c):null}):[U(a,b,Z,Y)];return g?S(L(b,null,f)):f},tmplItem:function(Y){var Z;if(Y instanceof S){Y=Y[0]}while(Y&&Y.nodeType===1&&!(Z=S.data(Y,"tmplItem"))&&(Y=Y.parentNode)){}return Z||C},template:function(Z,Y){if(Y){if(typeof Y==="string"){Y=N(Y)}else{if(Y instanceof S){Y=Y[0]||{}}}if(Y.nodeType){Y=S.data(Y,"tmpl")||S.data(Y,"tmpl",N(Y.innerHTML))}return typeof Z==="string"?(S.template[Z]=Y):Y}return Z?typeof Z!=="string"?S.template(null,Z):S.template[Z]||S.template(null,D.test(Z)?Z:S(Z)):null},encode:function(Y){return(""+Y).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});S.extend(S.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){Q={}},afterManip:function(c,a,Y){var Z=a.nodeType===11?S.makeArray(a.childNodes):a.nodeType===1?[a]:[];Y.call(c,a);P(Z);R++}});function L(Z,Y,h){var a,d=h?S.map(h,function(b){return typeof b==="string"?Z.key?b.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+V+'="'+Z.key+'" $2'):b:L(b,Z,b._ctnt)}):Z;if(Y){return d}d=d.join("");d.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(j,i,g,b){a=S(g).get();P(a);if(i){a=I(i).concat(a)}if(b){a=a.concat(I(b))}});return a?a:I(d)}function I(Z){var Y=document.createElement("div");Y.innerHTML=Z;return S.makeArray(Y.childNodes)}function N(Y){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+S.trim(Y).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(p,o,a,u,q,r,Z){var n=S.tmpl.tag[a],k,s,t;if(!n){throw"Template command not found: "+a}k=n._default||[];if(r&&!/\w$/.test(q)){q+=r;r=""}if(q){q=J(q);Z=Z?","+J(Z)+")":r?")":"";s=r?q.indexOf(".")>-1?q+r:"("+q+").call($item"+Z:q;t=r?s:"(typeof("+q+")==='function'?("+q+").call($item):("+q+"))"}else{t=s=k.$1||"null"}u=J(u);return"');"+n[o?"close":"open"].split("$notnull_1").join(q?"typeof("+q+")!=='undefined' && ("+q+")!=null":"true").split("$1a").join(t).split("$1").join(s).split("$2").join(u?u.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(e,g,f,h){h=h?","+h+")":f?")":"";return h?"("+g+").call($item"+h:e}):k.$2||"")+"_.push('"})+"');}return _;")}function M(Z,Y){Z._wrap=L(Z,true,S.isArray(Y)?Y:[D.test(Y)?Y:S(Y).html()]).join("")}function J(Y){return Y?Y.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function B(Y){var Z=document.createElement("div");Z.appendChild(Y.cloneNode(true));return Z.innerHTML}function P(f){var d="_"+R,b,a,g={},Y,Z,c;for(Y=0,Z=f.length;Y<Z;Y++){if((b=f[Y]).nodeType!==1){continue}a=b.getElementsByTagName("*");for(c=a.length-1;c>=0;c--){h(a[c])}h(b)}function h(t){var q,l=t,u,n,s;if(s=t.getAttribute(V)){while(l.parentNode&&(l=l.parentNode).nodeType===1&&!(q=l.getAttribute(V))){}if(q!==s){l=l.parentNode?l.nodeType===11?0:l.getAttribute(V)||0:0;if(!(n=Q[s])){n=T[s];n=U(n,Q[l]||T[l],null,true);n.key=++K;Q[K]=n}R&&r(s)}t.removeAttribute(V)}else{if(R&&(n=S.data(t,"tmplItem"))){r(n.key);Q[n.key]=n;l=S.data(t.parentNode,"tmplItem");l=l?l.key:0}}if(n){u=n;while(u&&u.key!=l){u.nodes.push(t);u=u.parent}delete n._ctnt;delete n._wrap;S.data(t,"tmplItem",n)}function r(e){e=e+d;n=g[e]=g[e]||U(n,Q[n.parent.key+d]||n.parent,null,true)}}}function H(f,Y,e,Z){if(!f){return O.pop()}O.push({_:f,tmpl:Y,item:this,data:e,options:Z})}function F(Y,a,Z){return S.tmpl(S.template(Y),a,Z,this)}function X(Z,Y){var a=Z.options||{};a.wrapped=Y;return S.tmpl(S.template(Z.tmpl),Z.data,a,Z.item)}function E(Y,a){var Z=this._wrap;return S.map(S(S.isArray(Z)?Z.join(""):Z).filter(Y||"*"),function(b){return a?b.innerText||b.textContent:b.outerHTML||B(b)})}function G(){var Y=this.nodes;S.tmpl(null,null,null,this).insertBefore(Y[0]);S(Y).remove()}})(jQuery);